---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";

import { SITE_URL, SITE_PORT } from "astro:env/client";
import { getLangFromUrl, getRoutePrefixForLang } from "../i18n/utils";
import FormattedDate from "../components/FormattedDate.astro";
import "../styles/global.css";
import ReadingProgress from "@/components/blog/reading-progress";
import { NavbarPlexicus, FooterPlexicus } from "shared-ui";
type Props = CollectionEntry<"blog">["data"];

const {
	title,
	description,
	pubDate,
	heroImage,
	author,
	excerpt,
	tags,
	category,
} = Astro.props;
const lang = getLangFromUrl(Astro.url);
const routeLang = getRoutePrefixForLang(lang)
---

<html lang={lang}>
	<head>
		<BaseHead title={title} description={description} />
		<style></style>
	</head>

	<body>
		<!-- <Header /> -->
		<NavbarPlexicus
			client:load
			lang={lang}
			fullSiteUrl={`${SITE_URL}:${SITE_PORT}`}
		/>
		<main class="">
			<!-- Back to blog link -->
			 <div class="bg-purple-900 pt-16">
				<header class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
					<div class="mb-8">
						<a
							href={`${routeLang}/`}
							class="inline-flex items-center text-white hover:text-blue-300 transition-colors"
						>
							<svg
								class="w-4 h-4 mr-2"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M15 19l-7-7 7-7"></path>
							</svg>
							Back to Blog
						</a>
					</div>
	
					<!-- Article header -->
					<div class="">
						<!-- Category Badge -->
						<div class="mb-4">
							<span
								class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
							>
								{category}
							</span>
						</div>
	
						<!-- Title -->
						<h1
							class="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight"
						>
							{title}
						</h1>
	
						<!-- Description -->
						<p
							class="text-xl md:text-2xl text-purple-200 mb-8 leading-relaxed"
						>
							{description}
						</p>
	
						<!-- Excerpt -->
						<div class="bg-purple-500 border-l-4 border-black p-4 mb-8">
							<p class="text-lg text-white italic">{excerpt}</p>
						</div>
	
						<!-- Meta Information -->
						<div
							class="flex flex-wrap items-center gap-4 text-white mb-6"
						>
							<div class="flex items-center">
								<div
									class="w-10 h-10 bg-gray-300 rounded-full mr-3"
								>
								</div>
								<span class="font-medium">{author}</span>
							</div>
							<span>•</span>
							<FormattedDate date={pubDate} />
							<span>•</span>
							<span>9 min read</span>
						</div>
	
						<!-- Tags -->
						{
							tags.length > 0 && (
								<div class="flex flex-wrap gap-2 mb-6">
									{tags.map((tag) => (
										<span class="px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 transition-colors cursor-pointer">
											#{tag}
										</span>
									))}
								</div>
							)
						}
	
						<!-- Hero Image -->
						{
							heroImage && (
								<div class="mb-8">
									<img
										src={heroImage || "/placeholder.svg"}
										alt={title}
										class="w-full h-64 md:h-96 object-cover rounded-lg shadow-lg"
									/>
								</div>
							)
						}
					</div>
				</header>
			 </div>

			<!-- Article content -->
			<div
				class="max-w-none max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"
			>
				<article class="prose prose-lg prose-gray mx-auto">
					<slot />
				</article>
			</div>
		</main>
		<ReadingProgress />
		<FooterPlexicus client:only />
	</body>
</html>
